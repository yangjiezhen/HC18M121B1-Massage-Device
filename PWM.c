/*  ************************************************************************************
*                               上海芯圣电子技术股份有限公司
*                                    www.holychip.cn
*   ************************************************************************************
*/
#include "holychip_define.h"
#include "PWM.h"

//******************************************************************************
// 函数名称: nPWM1
// 功能描述: 设置PWM1输出占空比
// 输入参数: n - 占空比参数（0~100对应0%~100%）
// 输出参数: 无
//******************************************************************************
void nPWM1(unsigned char n)
{
    WDTEN = 0;       // 关闭看门狗
    
    TMR2H = 0x40;
    PWM0E = 1;       // 使能PWM0输出
    T1 = 0x34;
    T1LOAD = 0xF5;   // 定时器1装载值
    PWM0P = n;       // 设置PWM0占空比
    T1CON = 0x40;    // 分频比1:1
    T1IF = 0;        // 清除定时器1中断标志
    
    T1EN = 1;        // 启动定时器1
    T1IE = 1;        // 使能定时器1中断
}


//******************************************************************************
// 函数名称: nPWM2
// 功能描述: 设置PWM2输出占空比
// 输入参数: m - 占空比参数（0~100对应0%~100%）
// 输出参数: 无
//******************************************************************************
void nPWM2(unsigned char m)
{
    WDTEN = 0;       // 关闭看门狗
    
    TMR2H = 0x40;
    PWM1E = 1;       // 使能PWM1输出
    T2 = 0x34;
    T2LOAD = 0xF5;   // 定时器2装载值
    PWM1P = m;       // 设置PWM1占空比
    T2CON = 0x40;    // 分频比1:1
    T2IF = 0;        // 清除定时器2中断标志
    
    T2EN = 1;        // 启动定时器2
    T2IE = 1;        // 使能定时器2中断
}
